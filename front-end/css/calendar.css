/* ======================================================
   calendar.css - v3 (Revisão Geral e Correção Final)
   ====================================================== */

:root{
  --bg: #f4f6f9;
  --card: #fff;
  --text: #1f2937;
  --muted: #6b7280;
  --primary: #2563eb;
  --primary-600:#1d4ed8;
  --border:#e5e7eb;
  --event-text:#fff;
}

body {
  margin: 0;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
  background: var(--bg);
  color: var(--text);
}

.calendar-container {
  max-width: 1080px;
  margin: 24px auto;
  background: var(--card);
  padding: 24px 28px;
  border-radius: 16px;
  box-shadow: 0 12px 28px rgba(2,6,23,0.08);
}

.calendar-container h2 {
  text-align: center;
  margin: 0 0 18px;
  font-weight: 800;
  font-size: 24px;
}

.filter-container { margin: 0 0 16px; text-align: center; font-size: 15px; }
.filter-container label { margin-right: 8px; color: var(--muted); font-weight: 600; }
.filter-container select {
  padding: 8px 12px; font-size: 15px; border: 1px solid var(--border);
  border-radius: 10px; background: #fff;
}
.filter-container select:focus{ outline: 2px solid rgba(37,99,235,.2); }

/* ===== FullCalendar – base ===== */
.fc {
  --fc-border-color: var(--border);
  --fc-now-indicator-color: #ef4444;
  --fc-page-bg-color: transparent;
  --fc-neutral-bg-color: #fafafa;
  --fc-today-bg-color: #fff7ed;
  --fc-event-border-color: transparent;
  --fc-button-bg-color: var(--primary);
  --fc-button-border-color: var(--primary);
  --fc-button-hover-bg-color: var(--primary-600);
  --fc-button-hover-border-color: var(--primary-600);
  --fc-button-text-color: #fff;
}

.fc .fc-toolbar-title{ font-size: 20px; font-weight: 800; }
.fc-timegrid-axis-cushion { color: var(--muted); font-weight: 600; }

/* ===== Eventos (cards) ===== */
.fc .fc-timegrid-event,
.fc .fc-daygrid-event {
  border-radius: 10px;
  box-shadow: 0 3px 10px rgba(15, 23, 42, .18);
  padding: 4px 8px;
  color: var(--event-text);
  /* A linha 'align-self: flex-start;' foi REMOVIDA daqui pois era a causa do erro de altura. */
}

/* NOVA REGRA para estilizar o conteúdo padrão do FullCalendar */
.fc-event-main-wrapper {
  display: flex;
  flex-direction: column;
  line-height: 1.3;
}
.fc-event-time {
  font-weight: 800;
  font-size: 13px;
}
.fc-event-title {
  font-weight: 500;
  font-size: 13.5px;
  white-space: normal; /* Permite quebra de linha no título */
}


.fc .fc-timegrid-event:hover,
.fc .fc-daygrid-event:hover { filter: brightness(.95); }

.fc-daygrid-event-dot { display: none; }
.fc-daygrid-event { white-space: normal; }

/* ===== Modal ===== */
.modal {
  display: none; position: fixed; inset: 0; z-index: 1000;
  background: rgba(15,23,42,0.35); justify-content: center; align-items: center;
}
.modal-content {
  background: var(--card); padding: 22px; border-radius: 14px;
  width: 92%; max-width: 440px; box-shadow: 0 20px 40px rgba(2,6,23,0.18);
  position: relative; text-align: left;
}
.close-btn { position: absolute; top: 10px; right: 14px; font-size: 22px; color: var(--muted); cursor: pointer; }
.modal-content h3 { text-align: center; margin-top: 0; }

#cancelBtn {
  margin-top: 18px; background: #ef4444; color: #fff; border: none;
  padding: 10px 14px; border-radius: 10px; font-weight: 700; cursor: pointer;
  display: block;
  margin-left: auto;
  margin-right: auto;
}
#cancelBtn:hover { filter: brightness(.95); }

/* ===== Form no modal ===== */
form#appointmentForm {
    display: flex;
    flex-direction: column;
    gap: 8px;
}
label { font-weight: 700; display: block; color: var(--text); font-size: 14px; }
input, select {
  width: 100%; padding: 10px 12px; border-radius: 10px;
  border: 1px solid var(--border); font-size: 15px; box-sizing: border-box;
}
button[type="submit"]{
  margin-top: 12px; padding: 12px 16px; border-radius: 10px;
  background: var(--primary); border: none; color: #fff; font-weight: 800;
  cursor: pointer;
}
button[type="submit"]:hover{ background: var(--primary-600); }

/* Estilo opcional para eventos agrupados */
.fc-event-group {
  opacity: 0.9;
  filter: saturate(0.8);
}

/* ===== Estilos para Modal de Grupo ===== */
.appointment-list {
  list-style: none;
  padding: 0;
  margin: 12px 0 0 0;
}

.appointment-list li {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 8px 4px;
  border-bottom: 1px solid var(--border);
}

.appointment-list li:last-child {
  border-bottom: none;
}

.appointment-list li span {
  margin-right: 16px;
}

.cancel-single-btn {
  background: transparent;
  border: none;
  cursor: pointer;
  font-size: 16px;
  padding: 4px;
  opacity: 0.7;
  transition: opacity 0.2s;
  flex-shrink: 0;
}

.cancel-single-btn:hover {
  opacity: 1;
}